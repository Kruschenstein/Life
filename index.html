<!DOCTYPE html>
<html>
    <head>
        <title>Game of Life</title>
        <meta charset="utf-8"/>
        <style>
            .container {
                display: grid;
                grid-template-columns: repeat(4, 1fr);
                grid-auto-rows: 100px;
                gap: 10px;
            }

            .item {
                background-color: blue;
            }

            .dead {
                background-color: darkviolet;
            }

            .alive {
                background-color: gold;
            }
        </style>
    </head>
    <body>
        <div class="container"></div>
    </body>
    <script>
        let grid = [
            [0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 1, 0, 0, 0],
            [0, 0, 1, 0, 0, 1, 0, 0],
            [0, 0, 1, 0, 0, 1, 0, 0],
            [0, 0, 0, 1, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0],
        ];
        const HEIGHT = grid.length;
        const WIDTH = grid[0].length;

        const container = document.getElementsByClassName("container")[0];
        container.style["grid-template-columns"] = `repeat(${WIDTH}, 1fr)`;
        for (let i = 0; i < HEIGHT * WIDTH; ++i) {
            let div = document.createElement("div");
            div.setAttribute("class", "item");
            container.appendChild(div);
        }

        const CELLS = [...document.getElementsByClassName("item")];

        setInterval(() => {
            displayGrid(grid, CELLS);
            const newGen = new Array(HEIGHT);
            for (let i = 0; i < HEIGHT; ++i) {
                newGen[i] = new Array(WIDTH);
            }

            for (let y = 0; y < HEIGHT; ++y) {
                for (let x = 0; x < WIDTH; ++x) {
                    const neighboorsSum =
                        getElement(grid, x - 1, y + 1) +
                        getElement(grid, x,     y + 1) +
                        getElement(grid, x + 1, y + 1) +
                        getElement(grid, x - 1, y) +
                        getElement(grid, x + 1, y) +
                        getElement(grid, x - 1, y - 1) +
                        getElement(grid, x    , y - 1) +
                        getElement(grid, x + 1, y - 1);

                    if (neighboorsSum === 3) {
                        newGen[y][x] = 1;
                    } else if (neighboorsSum !== 2) {
                        newGen[y][x] = 0;
                    } else {
                        newGen[y][x] = grid[y][x];
                    }
                }
            }
            grid = newGen;
        }, 1000);

        function getElement(grid, x, y) {
            if (x < 0 || x >= WIDTH || y < 0 || y >= HEIGHT) {
                return 0;
            }
            return grid[y][x]
        }

        function displayGrid(grid, cells) {
            const height = grid.length;
            for (let y = 0; y < height; ++y) {
                const width = grid[y].length;
                for (let x = 0; x < width; ++x) {
                    cells[y * width + x].classList.remove("dead", "alive");
                    if (getElement(grid, x, y) === 1) {
                        cells[y * width + x].classList.add("alive");
                    } else {
                        cells[y * width + x].classList.add("dead");
                    }
                }
            }
        }
    </script>
</html>